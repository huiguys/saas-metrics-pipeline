# Visualization Guide: SaaS Metrics Dashboard

This guide provides steps and best practices for visualizing the processed data generated by the `process_logs.py` script using Tableau and Power BI. The key data files are:

* `daily_summary.csv`
* `user_activity_summary.csv`
* `cohort_retention.csv`
* `funnel_counts.csv`
* `session_metrics.csv`

## General Data Preparation Note

* Ensure your CSV files have been successfully generated by running the `process_logs.py` script.
* Both Tableau and Power BI generally detect date/datetime columns automatically when importing from CSV. Explicitly changing date formats *before* importing is usually **not required**. Import the data as is, and leverage the date formatting options within your chosen visualization tool.

---

## Tableau Setup

1.  **Connect to Data:**
    * Open Tableau Desktop.
    * Under "Connect" > "To a File", select `Text File`.
    * Navigate to your project folder (`SaaS_Metrics_Pipeline`) and select one of the generated CSV files (e.g., `daily_summary.csv`).
    * To add more data sources (the other CSV files), click `Add` next to "Connections" in the Data Source tab, or connect to them individually as separate data sources within your workbook.

2.  **Key Visualizations & Dashboards:**

    * **Cohort Retention Heatmap**
        * **Data Source:** `cohort_retention.csv`
        * **Steps:**
            1.  Drag `cohort_month` (ensure type is Date or String Dimension) to **Rows**.
            2.  Drag `months_since_cohort_start` (ensure type is Continuous Dimension or Number) to **Columns**.
            3.  Drag `retention_rate` (ensure type is Measure) to **Color** on the Marks card.
            4.  Change the **Marks type** dropdown from "Automatic" to **"Square"**.
            5.  Adjust the color palette (e.g., sequential blue or green). Consider reversing the scale so higher retention is darker/brighter.
            6.  *Optional:* Drag `retention_rate` to **Label** on the Marks card to display percentages. Format the label as needed.

    * **Churn Risk Analysis**
        * **Data Source:** `user_activity_summary.csv`
        * **Steps:**
            1.  Create a **Calculated Field** via the top menu: `Analysis` > `Create Calculated Field`.
            2.  Name the field (e.g., `Churn Risk Category`).
            3.  Enter the following formula:
                ```tableau
                // Categorize users based on their churn risk score
                IF [churn_risk_score] > 0.7 THEN "High Risk"
                ELSEIF [churn_risk_score] > 0.4 THEN "Medium Risk"
                ELSE "Low Risk"
                END
                ```
            4.  Click `OK`.
            5.  Use this new `Churn Risk Category` dimension in charts:
                * **Bar Chart:** Drag `Churn Risk Category` to Columns, drag `user_id` to Rows, and change the `user_id` measure aggregation to `Count (Distinct)`.
                * **Scatter Plot:** Example: Drag `days_since_last_seen` to Columns, `avg_events_per_day_active` to Rows, and `Churn Risk Category` (or the original `churn_risk_score` measure) to **Color**. Drag `user_id` to Detail.

---

## Power BI Setup

1.  **Import Data:**
    * Open Power BI Desktop.
    * On the `Home` ribbon, click `Get data` > `Text/CSV`.
    * Navigate to your project folder and select a CSV file. Click `Load`.
    * Repeat this process for all necessary CSV files (`daily_summary.csv`, `user_activity_summary.csv`, `funnel_counts.csv`, etc.).
    * Check the `Model` view (third icon on the left pane) to review or adjust relationships Power BI may have automatically created between the tables based on common column names (like `user_id`).

2.  **Sample Reports & Measures:**

    * **Funnel Visualization**
        * **Data Source:** `funnel_counts.csv`
        * **Steps:**
            1.  In the `Visualizations` pane, select the `Funnel` chart icon. (If it's not visible, you might need to import it: click the `...` > `Get more visuals` > search for "Funnel" in AppSource and add one by Microsoft or another trusted publisher).
            2.  With the funnel visual selected on your report canvas, go to the `Data` pane and drag fields from your `funnel_counts` table:
                * Drag `step` to the **Category** well.
                * Drag `user_count` to the **Values** well.
            3.  Use the `Format visual` options (paintbrush icon) to customize appearance, show data labels, and display conversion rates. Ensure the steps are ordered logically in the funnel (you may need to create a separate column for sorting if alphabetical isn't correct).

    * **User Segments & LTV Analysis**
        * **Data Source:** `user_activity_summary.csv`
        * **Visuals:**
            * **Pie Chart / Bar Chart:** Drag `user_segment` to Legend (Pie) or Y-axis (Bar). Drag `user_id` to Values and set the aggregation to `Count (Distinct)`.
            * **Scatter Plot:** Drag `avg_events_per_day_active` to the X-axis, `simulated_ltv` to the Y-axis, `user_id` to Values, and `user_segment` to Legend (color).
        * **DAX Measure for Average LTV per Segment:**
            1.  In the `Data` pane, right-click on the `user_activity_summary` table name.
            2.  Select `New measure`.
            3.  Enter a DAX formula. A simple approach is to create the average LTV measure first, then use it in visuals sliced by segment:
                ```dax
                Segment Average LTV = AVERAGE(user_activity_summary[simulated_ltv])
                ```
            4.  Use this `Segment Average LTV` measure in visuals like Tables, Cards, or Bar Charts, placing `user_segment` on the Axis or in Rows to see the average LTV for each segment.

---

## Dashboard Best Practices

* **Color Schemes:**
    * Use color purposefully. Avoid relying solely on color (consider accessibility).
    * **Risk/KPIs:** Use intuitive semantic colors (e.g., Red for high churn/errors, Green for good performance). Gradients can show severity (e.g., Red -> Yellow -> Green for churn risk).
    * **Anomalies:** Use a distinct, high-visibility color (bright red/orange) combined with icons or callouts.
    * **Categorical Data (Segments):** Use qualitative color palettes with distinct hues for different categories. Tools like [Coolors.co](https://coolors.co/) or ColorBrewer can assist.

* **Filters & Interactivity:**
    * Include **Date Range Slicers/Filters** for time-based analysis. Link them across relevant dashboard pages.
    * Provide slicers for key dimensions like `user_segment` or `simulated_plan`.
    * Enable **Cross-Filtering** (default in Power BI, configurable in Tableau dashboard actions) so clicking elements in one chart filters related charts.

* **Layout & Storytelling:**
    * **Structure:** Place Key Performance Indicators (KPIs) and main summaries at the top or top-left. Group related charts logically.
    * **Clarity:** Use clear, concise titles for dashboards and visuals. Label axes properly. Use text boxes to add context, explanations, or definitions.
    * **Audience:** Design with the end-user in mind. A strategic dashboard for executives differs from a detailed operational dashboard for analysts.

* **Performance:**
    * **Tableau:** For larger datasets (>millions of rows), use **Tableau Extracts** (`.hyper`) for significantly better performance than live connections to CSVs. Configure scheduled extract refreshes if your underlying data changes.
    * **Power BI:** Define clear **Relationships** between your tables in the Model view. For very large tables (especially `user_activity_summary`), investigate creating **Aggregations** to pre-summarize data and accelerate visual rendering. Ensure data types are set appropriately (e.g., don't use text for numbers).

---
